<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Event Management</title>
</head>
<body>
    <main>
        <!-- adding events subsystem -->
    <section>
        <h4>Language selection</h4>
        <div id="google_translate_element"></div> <!-- Google Translate widget will appear here -->  
    </section>

    <header>
        <nav>
            <ul>
                <li><a href="index.php">Home</a></li>
                <li><a href="SignUp.php">Sign Up</a></li>
                <li><a href="Login.php">Login</a></li>

            </ul>
        </nav>
    </header>
    
    <h2>Add Event</h2>
    <form action="Events.php" method="POST">
        <label for="eventName">Event Name:</label><br>
        <input type="text" id="eventName" name="eventName" required><br><br>

        <label for="desc">Description:</label><br>
        <input type="text" id="desc" name="desc" required><br><br>

        <label for="location">Location:</label><br>
        <input type="text" id="location" name="location" required><br><br>

        <label for="capacity">Capacity:</label><br>
        <input type="number" id="capacity" name="capacity" required><br><br>
       
        <label for="incomeGroup">choose income group: </label>
        <select id="incomeGroup" name="incomeGroup">
            <option value="1">0-4500: </option>
            <option value="2">4501-5500: </option>
        </select>
        <br><br>

        <input type="submit" value="Add Event">
    </form>

    <h2>Delete Event</h2>
    <form action="deleteEvents.php" method="POST">
        <label for="event_id">select event to delete:</label><br>
        <select id="event_id" name="event_id">
            <?php
            try {
                $conn = getConnection();
                $sql = "SELECT event_id, eventname FROM em_events";
                $stmt = $conn->prepare($sql);
                $stmt->execute();

                $events = $stmt->fetchAll(PDO::FETCH_ASSOC);
                if (!empty($events)) {
                    foreach ($events as $event) {
                        echo "<option value='" . $event["event_id"] . "'>" . $event["eventname"] . "</option>";
                    }
                } else {
                    echo "<option disabled>no events found</option>";
                }

            } catch (PDOException $e) {
                echo "database error: " . $e->getMessage();
            } 

            $conn = null;
            $stmt = close();
            
            ?>
        </select><br><br>
        <input type="submit" value="Delete Event">
    </form>

    
    
    </main>

     <!-- Google Translate -->
     <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'zh-CN,ms,es,en,fr',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <!-- End Google Translate -->

</body>
</html>
